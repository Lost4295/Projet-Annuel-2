{% extends 'base.html.twig' %}

{% block title %}{{"loca"|trans}}
{% endblock %}
{% block stylesheets %}
	<style>

		.bar {
			width: 650px;
			background: #002349;
			box-shadow: 0 0 5px hsl(0 0% 78%);
			height: 55px;
			border-radius: 100vw;
			display: flex;
			justify-content: center;
			font-size: 0.6rem;
		}

		.bar div {
			border-radius: inherit;
			padding: 0.8rem 1.5rem;
			transition:  250ms ease;
		}

		.bar div:hover {
			background: #25486E;
		}

		.location {
			width: 34%;
		}
		.check-in,
		.check-out,
		.guests {
			width: 22%;
		}

		input[type="text"],
		input[type="date"], p.djf{
			background: none;
			border: none;
			padding: 0.2rem 0 0;
			position: relative;
			top: -15px;
		}

/*.onlynum {
			background: none;
			border: none;
		}
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
	  		-webkit-appearance: none;
	  		margin: 0;
	}*/
		input[type="text"]:focus {
			outline: none;
		}

		::placeholder {
			font-size: 0.75rem;
		}

		.guests {
			position: relative;
		}
		.guests span {
			position: absolute;
			top: 50%;
			right: 8px;
			transform: translateY(-50%);
			background: #3976AE;
			color: #fff;
			font-size: 0.8rem;
			padding: 0.8rem;
			border-radius: 50%;
		}

		.bar > div {
			position: relative;
		}



		.bar > div::before {
			position: absolute;
			content: "";
			left: 0;
			top: 50%;
			transform: translateY(-50%);
			width: 1px;
			height: 55%;
			background: white;
		}

		.bar>div:nth-of-type(1)::before {
			background: transparent;
		}

		.bar>div:hover::before {
			background: transparent;
		}
	</style>

{% endblock %}

{% block body %}
	<div class="m-3 d-flex align-items-center justify-content-center">
		<div class="bar">
			<div class="text-light location">
				<p>{{'destination'|trans }}</p>
				<input type="text" class="text-light" placeholder="{{'dest'|trans}}">
			</div>
			<div class="text-light check-in">
				<p>{{'checkin'|trans}}</p>
				<input type="date" id="startdate" class="text-light" placeholder="{{'when'|trans }}">
			</div>
			<div class="text-light check-out">
				<p>{{'checkout'|trans}}</p>
				<input type="date" id="enddate" class="text-light" placeholder="{{'when'|trans }}">
			</div>
			<div class="text-light guests">
				<p>{{"guests"|trans }}</p>
				<p class="djf" data-bs-toggle="collapse" data-bs-target="#card" aria-expanded="false" aria-controls="card">0 voyageur</p>
				<span>
					<i class="bi-search" onclick="alert('hey, faut m\'implémenter')"></i>
				</span>
			</div>
		</div>
	</div>
	<div class="collapse" id="card">
		<div class=" d-flex justify-content-center">
			<div class="card col-3">
				<div class="card-body">
					<div class="form-group">
						<label for="adults">{{"adults"|trans }}</label>
						<div class="d-flex flex-row justify-content-between align-items-center">
							<i class="bi bi-dash-circle moins fs-1"></i>
							<input type="number" class="onlynum form-control" id="adults" min="0" value="0" max="6">
							<i class="bi bi-plus-circle plus fs-1"></i>
						</div>
					</div>
					<div class="form-group">
						<label for="children">{{"kids"|trans }}</label>
						<div class="d-flex flex-row justify-content-between align-items-center">
							<i class="bi bi-dash-circle moins fs-1"></i>
							<input type="number" class="onlynum form-control" id="children" min="0" value="0" max="6">
							<i class="bi bi-plus-circle plus fs-1"></i>
						</div>
					</div>
					<div class="form-group">
						<label for="Babies">{{"babies"|trans}}</label>
						<div class="d-flex flex-row justify-content-between align-items-center">
							<i class="bi bi-dash-circle moins fs-1"></i>
							<input type="number" class="onlynum form-control" id="Babies" min="0" value="0" max="6">
							<i class="bi bi-plus-circle plus fs-1"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
	{% for appart in apparts %}
		<a href="{{ path('appart_detail', {'id': appart.id}) }}" class="col-md-4 py-1 text-decoration-none">
			<div class="card">
			<div class="card-body">
				<img src={{asset("images/appartements/apt1_1.jpeg")}} class="card-img-top" alt="...">
				<h5>{{appart.city}} - {{appart.country}}</h5>
				<small>{{appart.description|slice(0,50)~"..."}}</small>
				<div style="display: flex; justify-content: space-between; width: 100%;">
				<p>{{appart.price}} € / Nuit</p> 
				<p>{{appart.note}} / 5</p></div>
			</div>
			</div>
		</a>
    {% endfor %}

		<div class="col-md-4 py-1">
			<div class="card">
				<div class="card-body">
					<img src="https://placehold.co/300x200" class="card-img-top" alt="...">
					<h4>Card title</h4>
					<small>Some quick example text to build on the card title and make up the bulk of the card's content.</small>
				</div>
			</div>
		</div>

		<div class="col-md-4 py-1">
			<div class="card">
				<div class="card-body">
					<img src="https://placehold.co/300x200" class="card-img-top" alt="...">
					<h4>Card title</h4>
					<small>Some quick example text to build on the card title and make up the bulk of the card's content.</small>
				</div>
			</div>
		</div>
		<div class="col-md-4 py-1">
			<div class="card">
				<div class="card-body">
					<img src="https://placehold.co/300x200" class="card-img-top" alt="...">
					<h4>Card title</h4>
					<small>Some quick example text to build on the card title and make up the bulk of the card's content.</small>
				</div>
			</div>
		</div>
	</div>

{% endblock %}

{% block javascripts %}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/rangePlugin.js"></script>
	<script>
		$( "#startdate" ).flatpickr( {
			"plugins": [new rangePlugin(
				{ input: "#enddate" }
			)]
		});
	</script>
	<script>
		const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
		const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

		$('.plus').click(function () {
			$(this).prev().val(+$(this).prev().val() + 1);
			var total = +$("#adults").val() + +$("#children").val()+ +$("#Babies").val();
			var travel = " voyageurs";
			if (total <= 1) {
				travel =" voyageur";
			}
			$(".djf").text(total+travel);
		});

		$('.moins').click(function () {
			if ($(this).next().val() > 0) $(this).next().val(+$(this).next().val() - 1);
			var total = +$("#adults").val() + +$("#children").val()+ +$("#Babies").val();
			var travel = " voyageurs";
			if (total <= 1) {
				travel =" voyageur";
			}
			$(".djf").text(total+travel);
		});

	</script>
{% endblock %}
